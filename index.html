<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
      html,body,div { margin: 0; padding: 0; font: normal 16px/24px Helvetica Neue, Helvetica, sans-serif; color: #333; }
      #main { max-width: 630px; margin: 3em auto; }
      .bookmarklet { display: inline-block; padding: .5em 1em; color: #fff; background: #50dcf3; border-radius: 4px; text-decoration: none; }
      a { color: #50dcf3; }
      .dim { color: #999; }
    </style>
  </head>
  <body>
    <div id="main">
      <h1>Team-Life Balancer</h1>
      <p>
        Drag this button to your bookmarks bar to save it as a bookmarklet:
      </p>
      <p>
        <a class="bookmarklet" href="javascript:(function()%7Bconst%20minAvailablePeople%3DNumber(window.prompt(%22Minimal%20number%20of%20people%20to%20be%20available%22%2C10))%2Cdaily%3Dnew%20Set(%5B%223%22%2C%2221%22%2C%2226%22%2C%2235%22%2C%2241%22%2C%2244%22%2C%2257%22%5D)%2Cmover%3Dnew%20Set(%5B%223%22%2C%2221%22%2C%2226%22%2C%2244%22%2C%2257%22%5D)%2Cblocked%3Dnew%20Map(%5B%5B%2235%22%2Cnew%20Set(%5B2%2C3%5D)%5D%2C%5B%2252%22%2Cnew%20Set(%5B1%2C2%2C3%2C4%5D)%5D%5D)%2Cselectors%3D%7Btable%3A%22.c-a-team-calendar__table%22%2Ctoday%3A%22.today%22%2CstartOfWeek%3A%22.start-of-week%22%2Cweekend%3A%22.weekend%22%2CpublicHoliday%3A%22.public-holiday-bg%2C%20.public-holiday-bg-first-half%2C%20.public-holiday-bg-second-half%22%2ClifeDayFirstHalf%3A%22.non-work-day-bg%2C%20.non-work-day-bg-first-half%2C%20.absence-bg%2C%20.absence-bg-first-half%2C%20.absence-request-bg%2C%20.absence-request-bg-first-half%22%2ClifeDaySecondHalf%3A%22.non-work-day-bg%2C%20.non-work-day-bg-second-half%2C%20.absence-bg%2C%20.absence-bg-second-half%2C%20.absence-request-bg%2C%20.absence-request-bg-second-half%22%7D%2Cstyle%3Ddocument.createElement(%22style%22)%3Bdocument.head.append(style)%2Cstyle.sheet.insertRule(%60%24%7Bselectors.table%7D%20tbody%20td%3Afirst-child%3Ahover%20%7B%5Cn%20%20%20%20%20cursor%3A%20pointer%3B%5Cn%20%20%20%20%20text-decoration%3A%20line-through%3B%5Cn%20%20%7D%60%2Cstyle.sheet.cssRules.length)%2Cstyle.sheet.insertRule(%60%24%7Bselectors.table%7D%20th.critical%20%7B%5Cn%20%20%20%20%20background-color%3A%20%23db5763%3B%5Cn%20%20%20%20%20border-top-color%3A%20%23db5763%3B%5Cn%20%20%20%20%20color%3A%20%23fff%3B%5Cn%20%20%7D%60%2Cstyle.sheet.cssRules.length)%2Cstyle.sheet.insertRule(%60%24%7Bselectors.table%7D%20.critical%20%7B%5Cn%20%20%20%20%20border-left-color%3A%20%23db5763%3B%5Cn%20%20%20%20%20border-left-width%3A%203px%3B%5Cn%20%20%20%20%20border-right-color%3A%20%23db5763%3B%5Cn%20%20%20%20%20border-right-width%3A%203px%3B%5Cn%20%20%7D%60%2Cstyle.sheet.cssRules.length)%2Cstyle.sheet.insertRule(%60%24%7Bselectors.table%7D%20tfoot%20th.critical%20%7B%5Cn%20%20%20%20%20border-bottom-color%3A%20%23db5763%3B%5Cn%20%20%7D%60%2Cstyle.sheet.cssRules.length)%3Bconst%20table%3Ddocument.querySelectorAll(selectors.table).item(0)%2Cthead%3Dtable.querySelectorAll(%22thead%22).item(0)%2Ctbody%3Dtable.querySelectorAll(%22tbody%22).item(0)%2Ctoday%3Dtable.querySelectorAll(selectors.today)%3Bfor(const%20e%20of%20today)e.classList.remove(selectors.today.slice(1))%3Bconst%20tfoot%3Ddocument.createElement(%22tfoot%22)%2CtotalRow%3Ddocument.createElement(%22tr%22)%2CdailyRow%3Ddocument.createElement(%22tr%22)%2CmoverRow%3Ddocument.createElement(%22tr%22)%3Bfunction%20addBalance(e%2Ct%2Ca)%7Bconst%20l%3Ddocument.createElement(%22sup%22)%2Co%3Ddocument.createElement(%22sub%22)%3Be.append(l)%2Ce.append(document.createTextNode(%22%20%22))%2Ce.append(o)%2Cl.append(document.createTextNode(t))%2Co.append(document.createTextNode(a))%7Dfunction%20balance()%7Bfor(%3BtotalRow.lastChild%3B)totalRow.lastChild.remove()%2CdailyRow.lastChild.remove()%2CmoverRow.lastChild.remove()%3Bconst%20e%3Ddocument.createElement(%22th%22)%3BtotalRow.append(e)%2Ce.append(document.createTextNode(%22Total%22))%3Bconst%20t%3Ddocument.createElement(%22th%22)%3BdailyRow.append(t)%2Ct.append(document.createTextNode(%22Daily%22))%3Bconst%20a%3Ddocument.createElement(%22th%22)%3BmoverRow.append(a)%2Ca.append(document.createTextNode(%22Mover%22))%3Bconst%20l%3Dthead.querySelectorAll(%22th%22)%2Co%3Dtbody.querySelectorAll(%22tr%22)%3Bfor(let%20e%3D1%3Be%3Cl.length%3Be%2B%2B)%7Bconst%20t%3Dnew%20Date(table.dataset.year%2Ctable.dataset.month-1%2Cl.item(e).textContent)%2Ca%3Ddocument.createElement(%22th%22)%3BtotalRow.append(a)%3Bconst%20s%3Ddocument.createElement(%22th%22)%3BdailyRow.append(s)%3Bconst%20c%3Ddocument.createElement(%22th%22)%3Bif(moverRow.append(c)%2Cl.item(e).classList.contains(selectors.startOfWeek.slice(1))%26%26(a.classList.add(selectors.startOfWeek.slice(1))%2Cs.classList.add(selectors.startOfWeek.slice(1))%2Cc.classList.add(selectors.startOfWeek.slice(1)))%2Cl.item(e).classList.contains(selectors.weekend.slice(1)))%7Ba.classList.add(selectors.weekend.slice(1))%2Cs.classList.add(selectors.weekend.slice(1))%2Cc.classList.add(selectors.weekend.slice(1))%3Bcontinue%7Dlet%20n%3D!1%3Bconst%20d%3D%7B%22total-first-half%22%3A0%2C%22daily-first-half%22%3A0%2C%22mover-first-half%22%3A0%2C%22total-second-half%22%3A0%2C%22daily-second-half%22%3A0%2C%22mover-second-half%22%3A0%7D%3Bfor(let%20a%3D0%3Ba%3Co.length%3Ba%2B%2B)%7Bconst%20l%3Do.item(a).querySelectorAll(%60td%3Anth-child(%24%7Be%2B1%7D)%60).item(0)%3Bl.matches(selectors.publicHoliday)%3Fn%3D!0%3A(blocked.has(o.item(a).dataset.user)%26%26blocked.get(o.item(a).dataset.user).has(t.getDay())%26%26l.classList.add(%22non-work-day-bg-first-half%22%2C%22non-work-day-bg-second-half%22)%2Cl.matches(selectors.lifeDayFirstHalf)%7C%7C(d%5B%22total-first-half%22%5D%2B%2B%2Cdaily.has(o.item(a).dataset.user)%26%26d%5B%22daily-first-half%22%5D%2B%2B%2Cmover.has(o.item(a).dataset.user)%26%26d%5B%22mover-first-half%22%5D%2B%2B)%2Cl.matches(selectors.lifeDaySecondHalf)%7C%7C(d%5B%22total-second-half%22%5D%2B%2B%2Cdaily.has(o.item(a).dataset.user)%26%26d%5B%22daily-second-half%22%5D%2B%2B%2Cmover.has(o.item(a).dataset.user)%26%26d%5B%22mover-second-half%22%5D%2B%2B))%7Dif(!n%26%26(addBalance(a%2Cd%5B%22total-first-half%22%5D%2Cd%5B%22total-second-half%22%5D)%2CaddBalance(s%2Cd%5B%22daily-first-half%22%5D%2Cd%5B%22daily-second-half%22%5D)%2CaddBalance(c%2Cd%5B%22mover-first-half%22%5D%2Cd%5B%22mover-second-half%22%5D)%2Cd%5B%22total-first-half%22%5D%3C%3DminAvailablePeople%7C%7Cd%5B%22total-second-half%22%5D%3C%3DminAvailablePeople))%7Bconst%20t%3Dtable.querySelectorAll(%60th%3Anth-child(%24%7Be%2B1%7D)%2C%20td%3Anth-child(%24%7Be%2B1%7D)%60)%3Bfor(const%20e%20of%20t)e.classList.add(%22critical%22)%7D%7D%7Dtable.append(tfoot)%2Ctfoot.append(totalRow)%2Ctfoot.append(dailyRow)%2Ctfoot.append(moverRow)%2Ctbody.addEventListener(%22click%22%2C(e%3D%3E%7Be.target.matches(selectors.table%2B%22%20td%3Afirst-child%20span%22)%26%26(e.target.parentElement.parentElement.remove()%2Cbalance())%2Ce.target.matches(selectors.table%2B%22%20td%3Afirst-child%22)%26%26(e.target.parentElement.remove()%2Cbalance())%7D))%2Cbalance()%3B%7D)()">Team-Life Balancer</a>
      </p>
      
      <p class="dim">This page was created with the <a href="https://github.com/mrcoles/bookmarklet">bookmarklet</a> npm library.</p>
    </div>
  </body>
</html>
