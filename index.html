<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
      html,body,div { margin: 0; padding: 0; font: normal 16px/24px Helvetica Neue, Helvetica, sans-serif; color: #333; }
      #main { max-width: 630px; margin: 3em auto; }
      .bookmarklet { display: inline-block; padding: .5em 1em; color: #fff; background: #50dcf3; border-radius: 4px; text-decoration: none; }
      a { color: #50dcf3; }
      .dim { color: #999; }
    </style>
  </head>
  <body>
    <div id="main">
      <h1>Team-Life Balancer</h1>
      <p>
        Drag this button to your bookmarks bar to save it as a bookmarklet:
      </p>
      <p>
        <a class="bookmarklet" href="javascript:(function()%7B%22use%20strict%22%3Bvar%20minAvailablePeople%3DNumber(window.prompt(%22Minimal%20number%20of%20people%20to%20be%20available%22%2C10))%2Cdaily%3Dnew%20Set(%5B%223%22%2C%2221%22%2C%2230%22%2C%2235%22%5D)%2Cmover%3Dnew%20Set(%5B%223%22%2C%2221%22%2C%2230%22%2C%2251%22%5D)%2Cselectors%3D%7Btable%3A%22.c-a-team-calendar__table%22%2Ctoday%3A%22.today%22%2CstartOfWeek%3A%22.start-of-week%22%2Cweekend%3A%22.weekend%22%2CpublicHoliday%3A%22.public-holiday-bg%2C%20.public-holiday-bg-first-half%2C%20.public-holiday-bg-second-half%22%2ClifeDayFirstHalf%3A%22.non-work-day-bg%2C%20.non-work-day-bg-first-half%2C%20.absence-bg%2C%20.absence-bg-first-half%2C%20.absence-request-bg%2C%20.absence-request-bg-first-half%22%2ClifeDaySecondHalf%3A%22.non-work-day-bg%2C%20.non-work-day-bg-second-half%2C%20.absence-bg%2C%20.absence-bg-second-half%2C%20.absence-request-bg%2C%20.absence-request-bg-second-half%22%7D%2Cstyle%3Ddocument.createElement(%22style%22)%3Bdocument.head.append(style)%2Cstyle.sheet.insertRule(selectors.table%2B%22%20tbody%20td%3Afirst-child%3Ahover%20%7B%5Cn%20%20%20%20%20cursor%3A%20pointer%3B%5Cn%20%20%20%20%20text-decoration%3A%20line-through%3B%5Cn%20%20%7D%22%2Cstyle.sheet.cssRules.length)%2Cstyle.sheet.insertRule(selectors.table%2B%22%20th.critical%20%7B%5Cn%20%20%20%20%20background-color%3A%20%23db5763%3B%5Cn%20%20%20%20%20border-top-color%3A%20%23db5763%3B%5Cn%20%20%20%20%20color%3A%20%23fff%3B%5Cn%20%20%7D%22%2Cstyle.sheet.cssRules.length)%2Cstyle.sheet.insertRule(selectors.table%2B%22%20.critical%20%7B%5Cn%20%20%20%20%20border-left-color%3A%20%23db5763%3B%5Cn%20%20%20%20%20border-left-width%3A%203px%3B%5Cn%20%20%20%20%20border-right-color%3A%20%23db5763%3B%5Cn%20%20%20%20%20border-right-width%3A%203px%3B%5Cn%20%20%7D%22%2Cstyle.sheet.cssRules.length)%2Cstyle.sheet.insertRule(selectors.table%2B%22%20tfoot%20th.critical%20%7B%5Cn%20%20%20%20%20border-bottom-color%3A%20%23db5763%3B%5Cn%20%20%7D%22%2Cstyle.sheet.cssRules.length)%3Bvar%20table%3Ddocument.querySelectorAll(selectors.table).item(0)%2Cthead%3Dtable.querySelectorAll(%22thead%22).item(0)%2Ctbody%3Dtable.querySelectorAll(%22tbody%22).item(0)%2Ctoday%3Dtable.querySelectorAll(selectors.today)%2C_iteratorNormalCompletion%3D!0%2C_didIteratorError%3D!1%2C_iteratorError%3Dvoid%200%3Btry%7Bfor(var%20_step%2C_iterator%3Dtoday%5BSymbol.iterator%5D()%3B!(_iteratorNormalCompletion%3D(_step%3D_iterator.next()).done)%3B_iteratorNormalCompletion%3D!0)%7Bvar%20element%3D_step.value%3Belement.classList.remove(selectors.today.slice(1))%7D%7Dcatch(e)%7B_didIteratorError%3D!0%2C_iteratorError%3De%7Dfinally%7Btry%7B!_iteratorNormalCompletion%26%26_iterator.return%26%26_iterator.return()%7Dfinally%7Bif(_didIteratorError)throw%20_iteratorError%7D%7Dvar%20tfoot%3Ddocument.createElement(%22tfoot%22)%2CtotalRow%3Ddocument.createElement(%22tr%22)%2CdailyRow%3Ddocument.createElement(%22tr%22)%2CmoverRow%3Ddocument.createElement(%22tr%22)%3Bfunction%20addBalance(e%2Ct%2Ca)%7Bvar%20l%3Ddocument.createElement(%22sup%22)%2Cr%3Ddocument.createElement(%22sub%22)%3Be.append(l)%2Ce.append(document.createTextNode(%22%20%22))%2Ce.append(r)%2Cl.append(document.createTextNode(t))%2Cr.append(document.createTextNode(a))%7Dfunction%20balance()%7Bfor(%3BtotalRow.lastChild%3B)totalRow.lastChild.remove()%2CdailyRow.lastChild.remove()%2CmoverRow.lastChild.remove()%3Bvar%20e%3Ddocument.createElement(%22th%22)%3BtotalRow.append(e)%2Ce.append(document.createTextNode(%22Total%22))%3Be%3Ddocument.createElement(%22th%22)%3BdailyRow.append(e)%2Ce.append(document.createTextNode(%22Daily%22))%3Be%3Ddocument.createElement(%22th%22)%3BmoverRow.append(e)%2Ce.append(document.createTextNode(%22Mover%22))%3Bfor(var%20t%3Dthead.querySelectorAll(%22th%22)%2Ca%3Dtbody.querySelectorAll(%22tr%22)%2Cl%3D1%3Bl%3Ct.length%3Bl%2B%2B)%7Bvar%20r%3Ddocument.createElement(%22th%22)%3BtotalRow.append(r)%3Bvar%20o%3Ddocument.createElement(%22th%22)%3BdailyRow.append(o)%3Bvar%20s%3Ddocument.createElement(%22th%22)%3Bif(moverRow.append(s)%2Ct.item(l).classList.contains(selectors.startOfWeek.slice(1))%26%26(r.classList.add(selectors.startOfWeek.slice(1))%2Co.classList.add(selectors.startOfWeek.slice(1))%2Cs.classList.add(selectors.startOfWeek.slice(1)))%2Ct.item(l).classList.contains(selectors.weekend.slice(1)))r.classList.add(selectors.weekend.slice(1))%2Co.classList.add(selectors.weekend.slice(1))%2Cs.classList.add(selectors.weekend.slice(1))%3Belse%7Bfor(var%20d%3D!1%2Cn%3D%7B%22total-first-half%22%3A0%2C%22daily-first-half%22%3A0%2C%22mover-first-half%22%3A0%2C%22total-second-half%22%3A0%2C%22daily-second-half%22%3A0%2C%22mover-second-half%22%3A0%7D%2Cc%3D0%3Bc%3Ca.length%3Bc%2B%2B)%7Bvar%20i%3Da.item(c).querySelectorAll(%22td%3Anth-child(%22%2B(l%2B1)%2B%22)%22).item(0)%3Bi.matches(selectors.publicHoliday)%3Fd%3D!0%3A(i.matches(selectors.lifeDayFirstHalf)%7C%7C(n%5B%22total-first-half%22%5D%2B%2B%2Cdaily.has(a.item(c).dataset.user)%26%26n%5B%22daily-first-half%22%5D%2B%2B%2Cmover.has(a.item(c).dataset.user)%26%26n%5B%22mover-first-half%22%5D%2B%2B)%2Ci.matches(selectors.lifeDaySecondHalf)%7C%7C(n%5B%22total-second-half%22%5D%2B%2B%2Cdaily.has(a.item(c).dataset.user)%26%26n%5B%22daily-second-half%22%5D%2B%2B%2Cmover.has(a.item(c).dataset.user)%26%26n%5B%22mover-second-half%22%5D%2B%2B))%7Dif(!d%26%26(addBalance(r%2Cn%5B%22total-first-half%22%5D%2Cn%5B%22total-second-half%22%5D)%2CaddBalance(o%2Cn%5B%22daily-first-half%22%5D%2Cn%5B%22daily-second-half%22%5D)%2CaddBalance(s%2Cn%5B%22mover-first-half%22%5D%2Cn%5B%22mover-second-half%22%5D)%2Cn%5B%22total-first-half%22%5D%3C%3DminAvailablePeople%7C%7Cn%5B%22total-second-half%22%5D%3C%3DminAvailablePeople))%7Bvar%20m%3Dtable.querySelectorAll(%22th%3Anth-child(%22%2B(l%2B1)%2B%22)%2C%20td%3Anth-child(%22%2B(l%2B1)%2B%22)%22)%2Ch%3D!0%2Cf%3D!1%2Cb%3Dvoid%200%3Btry%7Bfor(var%20y%2Cu%3Dm%5BSymbol.iterator%5D()%3B!(h%3D(y%3Du.next()).done)%3Bh%3D!0)y.value.classList.add(%22critical%22)%7Dcatch(e)%7Bf%3D!0%2Cb%3De%7Dfinally%7Btry%7B!h%26%26u.return%26%26u.return()%7Dfinally%7Bif(f)throw%20b%7D%7D%7D%7D%7D%7Dtable.append(tfoot)%2Ctfoot.append(totalRow)%2Ctfoot.append(dailyRow)%2Ctfoot.append(moverRow)%2Ctbody.addEventListener(%22click%22%2Cfunction(e)%7Be.target.matches(selectors.table%2B%22%20td%3Afirst-child%20span%22)%26%26(e.target.parentElement.parentElement.remove()%2Cbalance())%2Ce.target.matches(selectors.table%2B%22%20td%3Afirst-child%22)%26%26(e.target.parentElement.remove()%2Cbalance())%7D)%2Cbalance()%3B%7D)()">Team-Life Balancer</a>
      </p>
      
      <p class="dim">This page was created with the <a href="https://github.com/mrcoles/bookmarklet">bookmarklet</a> npm library.</p>
    </div>
  </body>
</html>
